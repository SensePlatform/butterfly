/*! butterfly           2015-06-26 */

(function(){var t,s,e,i,r,h,o,n,a,c=[].slice,l=[].indexOf||function(t){for(var s=0,e=this.length;e>s;s++)if(s in this&&this[s]===t)return s;return-1};r=n=null,o=!1,h=(new Date).getTime(),t=document.querySelectorAll.bind(document),document.addEventListener("DOMContentLoaded",function(){var t,s,i,r,n,a,l,u,p,f;return r=function(t){return u.send("S"+t)},f=function(){return u.send("P")},console.log("Ping defined"),setInterval(f,1e4),t=function(){var t,s,e;return e=arguments[0],t=2<=arguments.length?c.call(arguments,1):[],s=t.join(","),"Resize"===e?u.send("R"+s):void 0},p="https:"===location.protocol?"wss://":"ws://",p+=document.location.host+"/ws"+location.pathname,u=new WebSocket(p),u.addEventListener("open",function(){return console.log("WebSocket open",arguments),u.send("R"+a.cols+","+a.rows),h=(new Date).getTime()}),u.addEventListener("error",function(){return console.log("WebSocket error",arguments)}),s="",n=null,i="",u.addEventListener("message",function(t){return n&&clearTimeout(n),i+=t.data,a.stop&&(i=i.slice(-10240)),i.length>a.buffSize?l():n=setTimeout(l,1)}),l=function(){return a.write(i),a.stop&&(a.stop=!1,a.body.classList.remove("stopped")),i=""},u.addEventListener("close",function(){return console.log("WebSocket closed",arguments),setTimeout(function(){return a.write("Closed"),a.skipNextKey=!0,a.body.classList.add("dead")},1),o=!0,(new Date).getTime()-h>6e4?open("","_self").close():void 0}),a=new e(document.body,r,t),addEventListener("beforeunload",function(){return o?void 0:"This will exit the terminal session"}),a.ws=u,window.butterfly=a,window.bench=function(t){var s;for(null==t&&(t=1e8),s="";s.length<t;)s+=Math.random().toString(36).substring(2);return console.time("bench"),console.profile("bench"),a.write(s),console.profileEnd(),console.timeEnd("bench")},window.cbench=function(t){var s;for(null==t&&(t=1e8),s="";s.length<t;)s+="["+(30+parseInt(20*Math.random()))+"m",s+=Math.random().toString(36).substring(2);return console.time("cbench"),console.profile("cbench"),a.write(s),console.profileEnd(),console.timeEnd("cbench")}}),i=function(t){return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,!1},a=0,s={normal:a++,escaped:a++,csi:a++,osc:a++,charset:a++,dcs:a++,ignore:a++},e=function(){function t(t,s,e){var i,r;this.parent=t,this.out=s,this.ctl=null!=e?e:function(){},this.document=this.parent.ownerDocument,this.body=this.document.getElementsByTagName("body")[0],this.forceWidth="yes"===this.body.getAttribute("data-force-unicode-width"),this.body.className="terminal focus",this.body.style.outline="none",this.body.setAttribute("tabindex",0),this.body.setAttribute("spellcheck","false"),i=this.document.createElement("div"),i.className="line",this.body.appendChild(i),this.children=[i],this.computeCharSize(),this.cols=Math.floor(this.body.clientWidth/this.charSize.width),this.rows=Math.floor(window.innerHeight/this.charSize.height),r=window.innerHeight%this.charSize.height,this.body.style["padding-bottom"]=r+"px",this.scrollback=1e6,this.buffSize=1e5,this.visualBell=100,this.convertEol=!1,this.termName="xterm",this.cursorBlink=!0,this.cursorState=0,this.stop=!1,this.lastcc=0,this.resetVars(),this.focus(),this.startBlink(),addEventListener("keydown",this.keyDown.bind(this)),addEventListener("keypress",this.keyPress.bind(this)),addEventListener("focus",this.focus.bind(this)),addEventListener("blur",this.blur.bind(this)),addEventListener("resize",function(t){return function(){return t.resize()}}(this)),this.body.addEventListener("load",function(t){return function(){return t.nativeScrollTo()}}(this),!0),"undefined"!=typeof InstallTrigger&&(this.body.contentEditable="true"),this.initmouse(),addEventListener("load",function(t){return function(){return t.resize()}}(this))}return t.prototype.cloneAttr=function(t,s){return null==s&&(s=null),{bg:t.bg,fg:t.fg,ch:null!==s?s:t.ch,bold:t.bold,underline:t.underline,blink:t.blink,inverse:t.inverse,invisible:t.invisible}},t.prototype.equalAttr=function(t,s){return t.bg===s.bg&&t.fg===s.fg&&t.bold===s.bold&&t.underline===s.underline&&t.blink===s.blink&&t.inverse===s.inverse&&t.invisible===s.invisible},t.prototype.putChar=function(t){return this.insertMode?(this.screen[this.y+this.shift].chars.splice(this.x,0,this.cloneAttr(this.curAttr,t)),this.screen[this.y+this.shift].chars.pop()):this.screen[this.y+this.shift].chars[this.x]=this.cloneAttr(this.curAttr,t),this.screen[this.y+this.shift].dirty=!0},t.prototype.resetVars=function(){var t;for(this.x=0,this.y=0,this.cursorHidden=!1,this.state=s.normal,this.queue="",this.scrollTop=0,this.scrollBottom=this.rows-1,this.scrollLock=!1,this.applicationKeypad=!1,this.applicationCursor=!1,this.originMode=!1,this.autowrap=!0,this.normal=null,this.charset=null,this.gcharset=null,this.glevel=0,this.charsets=[null],this.defAttr={bg:256,fg:257,ch:" ",bold:!1,underline:!1,blink:!1,inverse:!1,invisible:!1},this.curAttr=this.cloneAttr(this.defAttr),this.params=[],this.currentParam=0,this.prefix="",this.screen=[],t=this.rows,this.shift=0;t--;)this.screen.push(this.blankLine(!1,!1));return this.setupStops(),this.skipNextKey=null},t.prototype.computeCharSize=function(){var t;return t=document.createElement("span"),t.textContent="0123456789",this.children[0].appendChild(t),this.charSize={width:t.getBoundingClientRect().width/10,height:this.children[0].getBoundingClientRect().height},this.children[0].removeChild(t)},t.prototype.eraseAttr=function(){var t;return t=this.cloneAttr(this.defAttr),t.bg=this.curAttr.bg,t},t.prototype.focus=function(){return this.sendFocus&&this.send("[I"),this.showCursor(),this.body.classList.add("focus"),this.body.classList.remove("blur")},t.prototype.blur=function(){return this.cursorState=1,this.screen[this.y+this.shift].dirty=!0,this.refresh(),this.sendFocus&&this.send("[O"),this.body.classList.add("blur"),this.body.classList.remove("focus")},t.prototype.initmouse=function(){var t,s,e,r,h,o,n;return r=32,h=function(t){var i,h;return i=s(t),(h=e(t))?(o(i,h,t.type),r=i):void 0},n=function(t){var s,i;return s=r,(i=e(t))?(s+=32,o(s,i,t.type)):void 0},t=function(t){return function(s,e){return t.utfMouse?2047===e?s.push(0):127>e?s.push(e):(e>2047&&(e=2047),s.push(192|e>>6),s.push(128|63&e)):255===e?s.push(0):(e>127&&(e=127),s.push(e))}}(this),o=function(s){return function(e,i,r){var h;return s.urxvtMouse?(i.x-=32,i.y-=32,i.x++,i.y++,void s.send("["+e+";"+i.x+";"+i.y+"M")):s.sgrMouse?(i.x-=32,i.y-=32,e-=32,void s.send("[<"+e+";"+i.x+";"+i.y+("mouseup"===r?"m":"M"))):(h=[],t(h,e),t(h,i.x),t(h,i.y),s.send("[M"+String.fromCharCode.apply(String,h)))}}(this),s=function(t){return function(s){var e,i,r,h,o;switch(s.type){case"mousedown":e=null!=s.button?+s.button:null!=s.which?s.which-1:null;break;case"mouseup":e=3;break;case"wheel":e=s.deltaY<0?64:65}return o=s.shiftKey?4:0,r=s.metaKey?8:0,i=s.ctrlKey?16:0,h=o|r|i,t.vt200Mouse?h&=i:t.normalMouse||(h=0),32+(h<<2)+e}}(this),e=function(t){return function(s){var e,i,r,h;return r=s.pageX,h=s.pageY-window.scrollY,i=t.body.clientWidth,e=window.innerHeight,r=Math.ceil(r/i*t.cols),h=Math.ceil(h/e*t.rows),0>r&&(r=0),r>t.cols&&(r=t.cols),0>h&&(h=0),h>t.rows&&(h=t.rows),r+=32,h+=32,{x:r,y:h,type:s.type}}}(this),addEventListener("contextmenu",function(t){return function(s){return t.mouseEvents?i(s):void 0}}(this)),addEventListener("mousedown",function(t){return function(s){var e,r;if(t.mouseEvents)return h(s),e=n.bind(t),addEventListener("mousemove",e),t.x10Mouse||addEventListener("mouseup",r=function(t){return h(t),removeEventListener("mousemove",e),removeEventListener("mouseup",r),i(t)}),i(s)}}(this)),addEventListener("wheel",function(t){return function(s){if(t.mouseEvents){if(t.x10Mouse)return;return h(s),i(s)}}}(this))},t.prototype.linkify=function(t){var s,e,i,r;return r=/\b(?:https?|ftp):\/\/[a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|]/gim,i=/(^|[^\/])(www\.[\S]+(\b|$))/gim,s=/[\w.]+@[a-zA-Z_-]+?(?:\.[a-zA-Z]{2,6})+/gim,function(){var h,o,n,a;for(n=t.split("&nbsp;"),a=[],h=0,o=n.length;o>h;h++)e=n[h],a.push(e.replace(r,'<a href="$&">$&</a>').replace(i,'$1<a href="http://$2">$2</a>').replace(s,'<a href="mailto:$&">$&</a>'));return a}().join("&nbsp;")},t.prototype.refresh=function(t){var s,e,i,r,h,o,n,a,c,l,u,p,f,d,y,b,m,k,v,g,w,x,C,A,L,S,P,M,T,E;for(null==t&&(t=!1),x=this.body.querySelectorAll(".cursor"),l=0,u=x.length;u>l;l++)r=x[l],r.parentNode.replaceChild(this.document.createTextNode(r.textContent),r);for(k="",C=this.screen,c=m=0,p=C.length;p>m;c=++m)if(y=C[c],y.dirty||t){for(g="",E=c!==this.y+this.shift||this.cursorHidden?-(1/0):this.x,s=this.cloneAttr(this.defAttr),P=!1,a=v=0,A=this.cols-1;A>=0?A>=v:v>=A;a=A>=0?++v:--v){if(h=y.chars[a],h.html){g+=h.html;break}if(P)P=!1;else{if(e=h.ch,this.equalAttr(h,s)||(this.equalAttr(s,this.defAttr)||(g+="</span>"),this.equalAttr(h,this.defAttr)||(i=[],M=[],g+="<span ",h.bold&&i.push("bold"),h.underline&&i.push("underline"),h.blink&&i.push("blink"),h.inverse&&i.push("reverse-video"),h.invisible&&i.push("invisible"),"number"==typeof h.fg&&(o=h.fg,h.bold&&8>o&&(o+=8),i.push("fg-color-"+o)),"string"==typeof h.fg&&M.push("color: "+h.fg),"number"==typeof h.bg&&i.push("bg-color-"+h.bg),"string"==typeof h.bg&&M.push("background-color: "+h.bg),g+='class="',g+=i.join(" "),g+='"',M.length&&(g+=' style="'+M.join("; ")+'"'),g+=">")),a===E&&(g+='<span class="'+(this.cursorState?"reverse-video ":"")+'cursor">'),e.length>1)g+=e;else switch(e){case"&":g+="&amp;";break;case"<":g+="&lt;";break;case">":g+="&gt;";break;default:"¬†"===e?g+='<span class="nbsp">‚Äá</span>':" ">=e?g+="&nbsp;":!this.forceWidth||"~">=e?g+=e:e>"ÔºÄ"&&"ÔøØ">e?(P=!0,g+='<span style="display: inline-block; width: '+2*this.charSize.width+'px">'+e+"</span>"):g+='<span style="display: inline-block; width: '+this.charSize.width+'px">'+e+"</span>"}a===E&&(g+="</span>"),s=h}}this.equalAttr(s,this.defAttr)||(g+="</span>"),c===this.y+this.shift||h.html||(g=this.linkify(g)),y.wrap&&(g+="‚èé"),this.children[c]?this.children[c].innerHTML=g:k+='<div class="line">'+g+"</div>",this.screen[c].dirty=!1}if(""!==k){if(n=this.document.createElement("div"),n.className="group",n.innerHTML=k,this.body.appendChild(n),this.screen=this.screen.slice(-this.rows),this.shift=0,b=document.querySelectorAll(".line"),b.length>this.scrollback){for(L=Array.prototype.slice.call(b,0,b.length-this.scrollback),w=0,f=L.length;f>w;w++)y=L[w],y.remove();for(S=document.querySelectorAll(".group:empty"),T=0,d=S.length;d>T;T++)n=S[T],n.remove();b=document.querySelectorAll(".line")}this.children=Array.prototype.slice.call(b,-this.rows)}return this.scrollLock?void 0:this.nativeScrollTo()},t.prototype._cursorBlink=function(){var t;return this.cursorState^=1,(t=this.body.querySelector(".cursor"))?t.classList.contains("reverse-video")?t.classList.remove("reverse-video"):t.classList.add("reverse-video"):void 0},t.prototype.showCursor=function(){return this.cursorState?void 0:(this.cursorState=1,this.screen[this.y+this.shift].dirty=!0,this.refresh())},t.prototype.startBlink=function(){return this.cursorBlink?(this._blinker=function(t){return function(){return t._cursorBlink()}}(this),this.t_blink=setInterval(this._blinker,500)):void 0},t.prototype.refreshBlink=function(){return this.cursorBlink?(clearInterval(this.t_blink),this.t_blink=setInterval(this._blinker,500)):void 0},t.prototype.scroll=function(){var t,s,e,i,r;if(this.normal||0!==this.scrollTop||this.scrollBottom!==this.rows-1){for(this.screen.splice(this.shift+this.scrollBottom+1,0,this.blankLine()),this.screen.splice(this.shift+this.scrollTop,1),r=[],t=s=e=this.scrollTop,i=this.scrollBottom;i>=e?i>=s:s>=i;t=i>=e?++s:--s)r.push(this.screen[t+this.shift].dirty=!0);return r}return this.screen.push(this.blankLine()),this.shift++},t.prototype.unscroll=function(){var t,s,e,i,r;for(this.screen.splice(this.shift+this.scrollTop,0,this.blankLine(!0)),this.screen.splice(this.shift+this.scrollBottom+1,1),r=[],t=s=e=this.scrollTop,i=this.scrollBottom;i>=e?i>=s:s>=i;t=i>=e?++s:--s)r.push(this.screen[t+this.shift].dirty=!0);return r},t.prototype.nativeScrollTo=function(t){return null==t&&(t=2e9),window.scrollTo(0,t)},t.prototype.scrollDisplay=function(t){return this.nativeScrollTo(window.scrollY+t*this.charSize.height)},t.prototype.nextLine=function(){return this.y++,this.y>this.scrollBottom?(this.y--,this.scroll()):void 0},t.prototype.prevLine=function(){return this.y--,this.y<this.scrollTop?(this.y++,this.unscroll()):void 0},t.prototype.write=function(e){var i,r,h,o,n,a,c,l,u,p,f,d,y,b,m,k,v,g,w,x,C,A,L,S;for(c=0,u=e.length;u>c;){switch(o=e.charAt(c),this.state){case s.normal:switch(o){case"":this.bell();break;case"\n":case"":case"\f":this.screen[this.y+this.shift].dirty=!0,this.nextLine();break;case"\r":this.x=0;break;case"\b":this.x>=this.cols&&this.x--,this.x>0&&this.x--;break;case"  ":this.x=this.nextStop();break;case"":this.setgLevel(1);break;case"":this.setgLevel(0);break;case"":this.state=s.escaped;break;default:if(o>="ÃÄ"&&"ÕØ">=o||o>="·™∞"&&"·´ø">=o||o>="·∑Ä"&&"·∑ø">=o||o>="‚Éê"&&"‚Éø">=o||o>="Ô∏†"&&"Ô∏Ø">=o){if(L=this.x,S=this.y+this.shift,this.x>0)L-=1;else{if(!(this.y>0))break;S-=1,L=this.cols-1}this.screen[S].chars[L].ch+=o;break}if(o>=" "&&((null!=(k=this.charset)?k[o]:void 0)&&(o=this.charset[o]),this.x>=this.cols&&(this.autowrap&&(this.screen[this.y+this.shift].wrap=!0,this.nextLine()),this.x=0),this.putChar(o),this.x++,this.forceWidth&&o>"ÔºÄ"&&"ÔøØ">o)){if(this.cols<2||this.x>=this.cols){this.putChar(" ");break}this.putChar(" "),this.x++}}break;case s.escaped:switch(o){case"[":this.params=[],this.currentParam=0,this.state=s.csi;break;case"]":this.params=[],this.currentParam=0,this.state=s.osc;break;case"P":this.params=[],this.currentParam=0,this.state=s.dcs;break;case"_":this.state=s.ignore;break;case"^":this.state=s.ignore;break;case"c":this.reset();break;case"E":this.x=0,this.index();break;case"D":this.index();break;case"M":this.reverseIndex();break;case"%":this.setgLevel(0),this.setgCharset(0,t.prototype.charsets.US),this.state=s.normal,c++;break;case"(":case")":case"*":case"+":case"-":case".":switch(o){case"(":this.gcharset=0;break;case")":case"-":this.gcharset=1;break;case"*":case".":this.gcharset=2;break;case"+":this.gcharset=3}this.state=s.charset;break;case"/":this.gcharset=3,this.state=s.charset,c--;break;case"n":this.setgLevel(2);break;case"o":this.setgLevel(3);break;case"|":this.setgLevel(3);break;case"}":this.setgLevel(2);break;case"~":this.setgLevel(1);break;case"7":this.saveCursor(),this.state=s.normal;break;case"8":this.restoreCursor(),this.state=s.normal;break;case"#":switch(this.state=s.normal,c++,b=e.charAt(c)){case"3":break;case"4":break;case"5":break;case"6":break;case"8":for(v=this.screen,l=0,p=v.length;p>l;l++)for(f=v[l],f.dirty=!0,h=d=0,g=f.chars.length;g>=0?g>=d:d>=g;h=g>=0?++d:--d)f.chars[h]=this.cloneAttr(this.curAttr,"E");this.x=this.y=0}break;case"H":this.tabSet();break;case"=":this.applicationKeypad=!0,this.state=s.normal;break;case">":this.applicationKeypad=!1,this.state=s.normal;break;default:this.state=s.normal,console.log("Unknown ESC control:",o)}break;case s.charset:switch(o){case"0":a=t.prototype.charsets.SCLD;break;case"A":a=t.prototype.charsets.UK;break;case"B":a=t.prototype.charsets.US;break;case"4":a=t.prototype.charsets.Dutch;break;case"C":case"5":a=t.prototype.charsets.Finnish;break;case"R":a=t.prototype.charsets.French;break;case"Q":a=t.prototype.charsets.FrenchCanadian;break;case"K":a=t.prototype.charsets.German;break;case"Y":a=t.prototype.charsets.Italian;break;case"E":case"6":a=t.prototype.charsets.NorwegianDanish;break;case"Z":a=t.prototype.charsets.Spanish;break;case"H":case"7":a=t.prototype.charsets.Swedish;break;case"=":a=t.prototype.charsets.Swiss;break;case"/":a=t.prototype.charsets.ISOLatin,c++;break;default:a=t.prototype.charsets.US}this.setgCharset(this.gcharset,a),this.gcharset=null,this.state=s.normal;break;case s.osc:if(""===o||""===o){switch(""===o&&c++,this.params.push(this.currentParam),this.params[0]){case 0:case 1:case 2:this.params[1]&&(this.title=this.params[1]+" - ∆∏”ú∆∑ butterfly",this.handleTitle(this.title))}this.params=[],this.currentParam=0,this.state=s.normal}else this.params.length?this.currentParam+=o:o>="0"&&"9">=o?this.currentParam=10*this.currentParam+o.charCodeAt(0)-48:";"===o&&(this.params.push(this.currentParam),this.currentParam="");break;case s.csi:if("?"===o||">"===o||"!"===o){this.prefix=o;break}if(o>="0"&&"9">=o){this.currentParam=10*this.currentParam+o.charCodeAt(0)-48;break}if("$"===o||'"'===o||" "===o||"'"===o)break;if(" ">=o||o>="~"){"\b"===o&&(this.currentParam=this.currentParam/10&1),"\r"===o&&(this.x=0),["\n","","\f"].indexOf(o)>=0&&(this.screen[this.y+this.shift].dirty=!0,this.nextLine());break}if(this.params.push(this.currentParam),this.currentParam=0,";"===o)break;switch(this.state=s.normal,o){case"A":this.cursorUp(this.params);break;case"B":this.cursorDown(this.params);break;case"C":this.cursorForward(this.params);break;case"D":this.cursorBackward(this.params);break;case"H":this.cursorPos(this.params);break;case"J":this.eraseInDisplay(this.params);break;case"K":this.eraseInLine(this.params);break;case"m":this.prefix||this.charAttributes(this.params);break;case"n":this.prefix||this.deviceStatus(this.params);break;case"@":this.insertChars(this.params);break;case"E":this.cursorNextLine(this.params);break;case"F":this.cursorPrecedingLine(this.params);break;case"G":this.cursorCharAbsolute(this.params);break;case"L":this.insertLines(this.params);break;case"M":this.deleteLines(this.params);break;case"P":this.deleteChars(this.params);break;case"X":this.eraseChars(this.params);break;case"`":this.charPosAbsolute(this.params);break;case"a":this.HPositionRelative(this.params);break;case"c":this.sendDeviceAttributes(this.params);break;case"d":this.linePosAbsolute(this.params);break;case"e":this.VPositionRelative(this.params);break;case"f":this.HVPosition(this.params);break;case"h":this.setMode(this.params);break;case"l":this.resetMode(this.params);break;case"r":this.setScrollRegion(this.params);break;case"s":this.saveCursor(this.params);break;case"u":this.restoreCursor(this.params);break;case"I":this.cursorForwardTab(this.params);break;case"S":this.scrollUp(this.params);break;case"T":this.params.length<2&&!this.prefix&&this.scrollDown(this.params);break;case"Z":this.cursorBackwardTab(this.params);break;case"b":this.repeatPrecedingCharacter(this.params);break;case"g":this.tabClear(this.params);break;case"p":"!"===this.prefix&&this.softReset(this.params);break;default:console.error("Unknown CSI code: %s (%d).",o,o.charCodeAt(0))}this.prefix="";break;case s.dcs:if(""===o||""===o){switch(""===o&&c++,this.prefix){case"":if(m=this.currentParam,";"!==m[0]){console.error("Unknown DECUDK: "+m);break}if(m=m.slice(1),w=m.split("|",2),C=w[0],n=w[1],!n){console.error("No type for inline DECUDK: "+m);break}switch(C){case"HTML":x=html_sanitize(n,function(t){return t}),i=this.cloneAttr(this.curAttr),i.html='<div class="inline-html">'+x+"</div>",this.screen[this.y+this.shift].chars[this.x]=i,this.screen[this.y+this.shift].dirty=!0,this.screen[this.y+this.shift].wrap=!1,this.nextLine();break;case"IMAGE":n=encodeURI(n),n.indexOf(";")?(y=n.slice(0,n.indexOf(";")),r=n.slice(n.indexOf(";")+1)):(y="image",r=n),i=this.cloneAttr(this.curAttr),i.html='<img class="inline-image" src="data:'+y+";base64,"+r+'" />',this.screen[this.y+this.shift].chars[this.x]=i,this.screen[this.y+this.shift].dirty=!0,this.screen[this.y+this.shift].wrap=!1;break;case"PROMPT":this.send(n);break;case"TEXT":u+=n.length,e=e.slice(0,c+1)+n+e.slice(c+1);break;default:console.error("Unknown type "+C+" for DECUDK")}break;case"$q":switch(m=this.currentParam,A=!1,m){case'"q':m='0"q';break;case'"p':m='61"p';break;case"r":m=""+(this.scrollTop+1)+";"+(this.scrollBottom+1)+"r";break;case"m":m="0m";break;default:console.error("Unknown DCS Pt: %s.",m),m=""}this.send("P"+ +A+"$r"+m+"\\");break;case"+q":m=this.currentParam,A=!1,this.send("P"+ +A+"+r"+m+"\\");break;default:console.error("Unknown DCS prefix: %s.",this.prefix)}this.currentParam=0,this.prefix="",this.state=s.normal}else this.currentParam?this.currentParam+=o:this.prefix||"$"===o||"+"===o?2===this.prefix.length?this.currentParam=o:this.prefix+=o:this.currentParam=o;break;case s.ignore:(""===o||""===o)&&(""===o&&c++,this.state=s.normal)}c++}return this.screen[this.y+this.shift].dirty=!0,this.refresh()},t.prototype.writeln=function(t){return this.write(t+"\r\n")},t.prototype.keyDown=function(t){var s,e,r,h;if(t.keyCode>15&&t.keyCode<19)return!0;if((t.shiftKey||t.ctrlKey)&&45===t.keyCode)return!0;if(t.shiftKey&&t.ctrlKey&&(67===(r=t.keyCode)||86===r))return!0;if(t.altKey&&90===t.keyCode&&!this.skipNextKey)return this.skipNextKey=!0,this.body.classList.add("skip"),i(t);if(this.skipNextKey)return this.skipNextKey=!1,this.body.classList.remove("skip"),!0;switch(t.keyCode){case 8:if(e=t.altKey?"":"",t.shiftKey){e+="\b";break}e+="";break;case 9:if(t.shiftKey){e="[Z";break}e="  ";break;case 13:e="\r";break;case 27:e="";break;case 37:if(this.applicationCursor){e="OD";break}e="[D";break;case 39:if(this.applicationCursor){e="OC";break}e="[C";break;case 38:if(this.applicationCursor){e="OA";break}if(t.ctrlKey)return this.scrollDisplay(-1),i(t);e="[A";break;case 40:if(this.applicationCursor){e="OB";break}if(t.ctrlKey)return this.scrollDisplay(1),i(t);e="[B";break;case 46:e="[3~";break;case 45:e="[2~";break;case 36:if(this.applicationKeypad){e="OH";break}e="OH";break;case 35:if(this.applicationKeypad){e="OF";break}e="OF";break;case 33:if(t.shiftKey)return this.scrollDisplay(-(this.rows-1)),i(t);e="[5~";break;case 34:if(t.shiftKey)return this.scrollDisplay(this.rows-1),i(t);e="[6~";break;case 112:e="OP";break;case 113:e="OQ";break;case 114:e="OR";break;case 115:e="OS";break;case 116:e="[15~";break;case 117:e="[17~";break;case 118:e="[18~";break;case 119:e="[19~";break;case 120:e="[20~";break;case 121:e="[21~";break;case 122:e="[23~";break;case 123:e="[24~";break;case 145:return this.scrollLock=!this.scrollLock,this.scrollLock?this.body.classList.add("locked"):this.body.classList.remove("locked"),i(t);default:if(t.ctrlKey)if(t.keyCode>=65&&t.keyCode<=90){if(67===t.keyCode){if(h=(new Date).getTime(),h-this.lastcc<500&&!this.stop){for(s=setTimeout(function(){});s--;)s!==this.t_bell&&s!==this.t_queue&&s!==this.t_blink&&clearTimeout(s);return this.body.classList.add("stopped"),this.stop=!0,this.send(" ")}if(this.stop)return!0;this.lastcc=h}e=String.fromCharCode(t.keyCode-64)}else 32===t.keyCode?e=String.fromCharCode(0):t.keyCode>=51&&t.keyCode<=55?e=String.fromCharCode(t.keyCode-51+27):56===t.keyCode?e=String.fromCharCode(127):219===t.keyCode?e=String.fromCharCode(27):221===t.keyCode&&(e=String.fromCharCode(29));else(t.altKey&&l.call(navigator.platform,"Mac")<0||t.metaKey&&l.call(navigator.platform,"Mac")>=0)&&(t.keyCode>=65&&t.keyCode<=90?e=""+String.fromCharCode(t.keyCode+32):192===t.keyCode?e="`":t.keyCode>=48&&t.keyCode<=57&&(e=""+(t.keyCode-48)))}return t.keyCode>=37&&t.keyCode<=40&&(t.ctrlKey?e=e.slice(0,-1)+"1;5"+e.slice(-1):t.altKey?e=e.slice(0,-1)+"1;3"+e.slice(-1):t.shiftKey&&(e=e.slice(0,-1)+"1;4"+e.slice(-1))),e?(this.showCursor(),this.send(e),i(t)):!0},t.prototype.setgLevel=function(t){return this.glevel=t,this.charset=this.charsets[t]},t.prototype.setgCharset=function(t,s){return this.charsets[t]=s,this.glevel===t?this.charset=s:void 0},t.prototype.keyPress=function(t){var s,e;if(this.skipNextKey===!1)return this.skipNextKey=null,!0;if(t.keyCode>15&&t.keyCode<19)return!0;if((t.shiftKey||t.ctrlKey)&&45===t.keyCode)return!0;if(t.shiftKey&&t.ctrlKey&&(67===(e=t.keyCode)||86===e))return!0;if(i(t),t.charCode)s=t.charCode;else if(null==t.which)s=t.keyCode;else{if(0===t.which||0===t.charCode)return!1;s=t.which}return!s||t.ctrlKey||t.altKey||t.metaKey?!1:(s=String.fromCharCode(s),this.showCursor(),this.send(s),!1)},t.prototype.bell=function(t){return null==t&&(t="bell"),this.visualBell?(this.body.classList.add(t),this.t_bell=setTimeout(function(s){return function(){return s.body.classList.remove(t)}}(this),this.visualBell)):void 0},t.prototype.resize=function(t,s){var e,i,r,h,o,n,a;if(null==t&&(t=null),null==s&&(s=null),o=this.cols,n=this.rows,this.computeCharSize(),this.cols=t||Math.floor(this.body.clientWidth/this.charSize.width),this.rows=s||Math.floor(window.innerHeight/this.charSize.height),a=window.innerHeight%this.charSize.height,this.body.style["padding-bottom"]=a+"px",t||s||o!==this.cols||n!==this.rows){if(this.ctl("Resize",this.cols,this.rows),o<this.cols)for(i=this.screen.length;i--;){for(;this.screen[i].chars.length<this.cols;)this.screen[i].chars.push(this.defAttr);this.screen[i].wrap=!1}else if(o>this.cols)for(i=this.screen.length;i--;)for(;this.screen[i].chars.length>this.cols;)this.screen[i].chars.pop();if(this.setupStops(o),r=n,r<this.rows)for(e=this.body;r++<this.rows;)this.screen.length<this.rows&&this.screen.push(this.blankLine()),this.children.length<this.rows&&(h=this.document.createElement("div"),h.className="line",e.appendChild(h),this.children.push(h));else if(r>this.rows)for(;r-->this.rows;)this.screen.length>this.rows&&this.screen.pop(),this.children.length>this.rows&&(e=this.children.pop(),null!=e&&e.parentNode.removeChild(e));return this.y>=this.rows&&(this.y=this.rows-1),this.x>=this.cols&&(this.x=this.cols-1),this.scrollTop=0,this.scrollBottom=this.rows-1,this.refresh(!0),this.normal=null,t||s?this.reset():void 0}},t.prototype.resizeWindowPlease=function(t){var s,e;return s=window.innerWidth-this.body.clientWidth,e=t*this.charSize.width+s,resizeTo(e,window.innerHeight)},t.prototype.setupStops=function(t){var s;for(null!=t?this.tabs[t]||(t=this.prevStop(t)):(this.tabs={},t=0),s=[];t<this.cols;)this.tabs[t]=!0,s.push(t+=8);return s},t.prototype.prevStop=function(t){for(null==t&&(t=this.x);!this.tabs[--t]&&t>0;);return t>=this.cols?this.cols-1:0>t?0:t},t.prototype.nextStop=function(t){for(null==t&&(t=this.x);!this.tabs[++t]&&t<this.cols;);return t>=this.cols?this.cols-1:0>t?0:t},t.prototype.eraseRight=function(t,s){var e;for(e=this.screen[s+this.shift].chars;t<this.cols;)e[t]=this.eraseAttr(),t++;return this.screen[s+this.shift].dirty=!0,this.screen[s+this.shift].wrap=!1},t.prototype.eraseLeft=function(t,s){for(t++;t--;)this.screen[s+this.shift].chars[t]=this.eraseAttr();return this.screen[s+this.shift].dirty=!0,this.screen[s+this.shift].wrap=!1},t.prototype.eraseLine=function(t){return this.eraseRight(0,t)},t.prototype.blankLine=function(t,s){var e,i,r;for(null==t&&(t=!1),null==s&&(s=!0),e=t?this.eraseAttr():this.defAttr,r=[],i=0;i<this.cols;)r[i]=e,i++;return{chars:r,dirty:s,wrap:!1}},t.prototype.ch=function(t){return t?this.eraseAttr():this.defAttr},t.prototype.isterm=function(t){return 0===(""+this.termName).indexOf(t)},t.prototype.send=function(t){return this.out(t)},t.prototype.handleTitle=function(t){return document.title=t},t.prototype.index=function(){return this.nextLine(),this.state=s.normal},t.prototype.reverseIndex=function(){return this.prevLine(),this.state=s.normal},t.prototype.reset=function(){return this.resetVars(),this.refresh(!0)},t.prototype.tabSet=function(){return this.tabs[this.x]=!0,this.state=s.normal},t.prototype.cursorUp=function(t){var s;return s=t[0],1>s&&(s=1),this.y-=s,this.y<0?this.y=0:void 0},t.prototype.cursorDown=function(t){var s;return s=t[0],1>s&&(s=1),this.y+=s,this.y>=this.rows?this.y=this.rows-1:void 0},t.prototype.cursorForward=function(t){var s;return s=t[0],1>s&&(s=1),this.x+=s,this.x>=this.cols?this.x=this.cols-1:void 0},t.prototype.cursorBackward=function(t){var s;return s=t[0],1>s&&(s=1),this.x-=s,this.x<0?this.x=0:void 0},t.prototype.cursorPos=function(t){var s,e;return e=t[0]-1,s=t.length>=2?t[1]-1:0,0>e?e=0:e>=this.rows&&(e=this.rows-1),0>s?s=0:s>=this.cols&&(s=this.cols-1),this.x=s,this.y=e+(this.originMode?this.scrollTop:0)},t.prototype.eraseInDisplay=function(t){var s,e,i,r;switch(t[0]){case 0:for(this.eraseRight(this.x,this.y),s=this.y+1,e=[];s<this.rows;)this.eraseLine(s),e.push(s++);return e;case 1:for(this.eraseLeft(this.x,this.y),s=this.y,i=[];s--;)i.push(this.eraseLine(s));return i;case 2:for(s=this.rows,r=[];s--;)r.push(this.eraseLine(s));return r}},t.prototype.eraseInLine=function(t){switch(t[0]){case 0:return this.eraseRight(this.x,this.y);case 1:return this.eraseLeft(this.x,this.y);case 2:return this.eraseLine(this.y)}},t.prototype.charAttributes=function(t){var s,e,i,r;if(1===t.length&&0===t[0])return void(this.curAttr=this.cloneAttr(this.defAttr));for(e=t.length,s=0,r=[];e>s;)i=t[s],i>=30&&37>=i?this.curAttr.fg=i-30:i>=40&&47>=i?this.curAttr.bg=i-40:i>=90&&97>=i?(i+=8,this.curAttr.fg=i-90):i>=100&&107>=i?(i+=8,this.curAttr.bg=i-100):0===i?this.curAttr=this.cloneAttr(this.defAttr):1===i?this.curAttr.bold=!0:4===i?this.curAttr.underline=!0:5===i?this.curAttr.blink=!0:7===i?this.curAttr.inverse=!0:8===i?this.curAttr.invisible=!0:10===i||(22===i?this.curAttr.bold=!1:24===i?this.curAttr.underline=!1:25===i?this.curAttr.blink=!1:27===i?this.curAttr.inverse=!1:28===i?this.curAttr.invisible=!1:39===i?this.curAttr.fg=257:49===i?this.curAttr.bg=256:38===i?2===t[s+1]?(s+=2,this.curAttr.fg="rgb("+t[s]+", "+t[s+1]+", "+t[s+2]+")",s+=2):5===t[s+1]&&(s+=2,this.curAttr.fg=255&t[s]):48===i?2===t[s+1]?(s+=2,this.curAttr.bg="rgb("+t[s]+", "+t[s+1]+", "+t[s+2]+")",s+=2):5===t[s+1]&&(s+=2,this.curAttr.bg=255&t[s]):100===i?(this.curAttr.fg=257,this.curAttr.bg=256):console.error("Unknown SGR attribute: %d.",i)),r.push(s++);return r},t.prototype.deviceStatus=function(t){if(this.prefix){if("?"===this.prefix&&6===t[0])return this.send("[?"+(this.y+1)+";"+(this.x+1)+"R")}else switch(t[0]){case 5:return this.send("[0n");case 6:return this.send("["+(this.y+1)+";"+(this.x+1)+"R")}},t.prototype.insertChars=function(t){var s,e,i;for(e=t[0],1>e&&(e=1),i=this.y,s=this.x;e--&&s<this.cols;)this.screen[i+this.shift].chars.splice(s++,0,[this.eraseAttr(),!0]),this.screen[i+this.shift].chars.pop();return this.screen[i+this.shift].dirty=!0},t.prototype.cursorNextLine=function(t){var s;return s=t[0],1>s&&(s=1),this.y+=s,this.y>=this.rows&&(this.y=this.rows-1),this.x=0},t.prototype.cursorPrecedingLine=function(t){var s;return s=t[0],1>s&&(s=1),this.y-=s,this.y<0&&(this.y=0),this.x=0},t.prototype.cursorCharAbsolute=function(t){var s;return s=t[0],1>s&&(s=1),this.x=s-1},t.prototype.insertLines=function(t){var s,e,i,r,h,o;for(i=t[0],1>i&&(i=1);i--;)this.screen.splice(this.y+this.shift,0,this.blankLine(!0)),this.screen.splice(this.scrollBottom+1+this.shift,1);for(o=[],s=e=r=this.y+this.shift,h=this.screen.length-1;h>=r?h>=e:e>=h;s=h>=r?++e:--e)o.push(this.screen[s].dirty=!0);return o},t.prototype.deleteLines=function(t){var s,e,i,r,h,o;for(i=t[0],1>i&&(i=1);i--;)this.screen.splice(this.scrollBottom+this.shift,0,this.blankLine(!0)),this.screen.splice(this.y+this.shift,1),this.normal||0!==this.scrollTop||this.scrollBottom!==this.rows-1||(this.children[this.y+this.shift].remove(),this.children.splice(this.y+this.shift,1));if(this.normal||0!==this.scrollTop||this.scrollBottom!==this.rows-1){for(o=[],s=e=r=this.y+this.shift,h=this.screen.length-1;h>=r?h>=e:e>=h;s=h>=r?++e:--e)o.push(this.screen[s].dirty=!0);return o}},t.prototype.deleteChars=function(t){var s;for(s=t[0],1>s&&(s=1);s--;)this.screen[this.y+this.shift].chars.splice(this.x,1),this.screen[this.y+this.shift].chars.push(this.eraseAttr());return this.screen[this.y+this.shift].dirty=!0,this.screen[this.y+this.shift].wrap=!1},t.prototype.eraseChars=function(t){var s,e;for(e=t[0],1>e&&(e=1),s=this.x;e--&&s<this.cols;)this.screen[this.y+this.shift].chars[s++]=this.eraseAttr();return this.screen[this.y+this.shift].dirty=!0,this.screen[this.y+this.shift].wrap=!1},t.prototype.charPosAbsolute=function(t){var s;return s=t[0],1>s&&(s=1),this.x=s-1,this.x>=this.cols?this.x=this.cols-1:void 0},t.prototype.HPositionRelative=function(t){var s;return s=t[0],1>s&&(s=1),this.x+=s,this.x>=this.cols?this.x=this.cols-1:void 0},t.prototype.sendDeviceAttributes=function(t){if(!(t[0]>0))if(this.prefix){if(">"===this.prefix){if(this.isterm("xterm"))return this.send("[>0;276;0c");

if(this.isterm("rxvt-unicode"))return this.send("[>85;95;0c");if(this.isterm("linux"))return this.send(t[0]+"c");if(this.isterm("screen"))return this.send("[>83;40003;0c")}}else{if(this.isterm("xterm")||this.isterm("rxvt-unicode")||this.isterm("screen"))return this.send("[?1;2c");if(this.isterm("linux"))return this.send("[?6c")}},t.prototype.linePosAbsolute=function(t){var s;return s=t[0],1>s&&(s=1),this.y=s-1,this.y>=this.rows?this.y=this.rows-1:void 0},t.prototype.VPositionRelative=function(t){var s;return s=t[0],1>s&&(s=1),this.y+=s,this.y>=this.rows?this.y=this.rows-1:void 0},t.prototype.HVPosition=function(t){return t[0]<1&&(t[0]=1),t[1]<1&&(t[1]=1),this.y=t[0]-1,this.y>=this.rows&&(this.y=this.rows-1),this.x=t[1]-1,this.x>=this.cols?this.x=this.cols-1:void 0},t.prototype.setMode=function(s){var e,i,r;if("object"!=typeof s)if(this.prefix){if("?"===this.prefix)switch(s){case 1:return this.applicationCursor=!0;case 2:return this.setgCharset(0,t.prototype.charsets.US),this.setgCharset(1,t.prototype.charsets.US),this.setgCharset(2,t.prototype.charsets.US),this.setgCharset(3,t.prototype.charsets.US);case 3:return this.savedCols=this.cols,this.resize(132,this.rows),this.resizeWindowPlease(132),this.reset();case 6:return this.originMode=!0;case 7:return this.autowrap=!0;case 66:return this.applicationKeypad=!0;case 9:case 1e3:case 1002:case 1003:return this.x10Mouse=9===s,this.vt200Mouse=1e3===s,this.normalMouse=s>1e3,this.mouseEvents=!0,this.body.style.cursor="pointer";case 1004:return this.sendFocus=!0;case 1005:return this.utfMouse=!0;case 1006:return this.sgrMouse=!0;case 1015:return this.urxvtMouse=!0;case 25:return this.cursorHidden=!1;case 1049:case 47:case 1047:if(!this.normal)return r={screen:this.screen,x:this.x,y:this.y,shift:this.shift,scrollTop:this.scrollTop,scrollBottom:this.scrollBottom,tabs:this.tabs},this.reset(),this.normal=r,this.showCursor()}}else switch(s){case 4:this.insertMode=!0;break;case 20:this.convertEol=!0}else for(i=s.length,e=0;i>e;)this.setMode(s[e]),e++},t.prototype.resetMode=function(t){var s,e;if("object"!=typeof t)if(this.prefix){if("?"===this.prefix)switch(t){case 1:return this.applicationCursor=!1;case 3:return 132===this.cols&&this.savedCols&&this.resize(this.savedCols,this.rows),this.resizeWindowPlease(80),this.reset(),delete this.savedCols;case 6:return this.originMode=!1;case 7:return this.autowrap=!1;case 66:return this.applicationKeypad=!1;case 9:case 1e3:case 1002:case 1003:return this.x10Mouse=!1,this.vt200Mouse=!1,this.normalMouse=!1,this.mouseEvents=!1,this.body.style.cursor="";case 1004:return this.sendFocus=!1;case 1005:return this.utfMouse=!1;case 1006:return this.sgrMouse=!1;case 1015:return this.urxvtMouse=!1;case 25:return this.cursorHidden=!0;case 1049:case 47:case 1047:if(this.normal)return this.screen=this.normal.screen,this.x=this.normal.x,this.y=this.normal.y,this.shift=this.normal.shift,this.scrollTop=this.normal.scrollTop,this.scrollBottom=this.normal.scrollBottom,this.tabs=this.normal.tabs,this.normal=null,this.reset(),this.showCursor()}}else switch(t){case 4:this.insertMode=!1;break;case 20:this.convertEol=!1}else for(e=t.length,s=0;e>s;)this.resetMode(t[s]),s++},t.prototype.setScrollRegion=function(t){return this.prefix?void 0:(this.scrollTop=(t[0]||1)-1,this.scrollBottom=(t[1]||this.rows)-1,this.x=0,this.y=0)},t.prototype.saveCursor=function(t){return this.savedX=this.x,this.savedY=this.y},t.prototype.restoreCursor=function(t){return this.x=this.savedX||0,this.y=this.savedY||0},t.prototype.cursorForwardTab=function(t){var s,e;for(s=t[0]||1,e=[];s--;)e.push(this.x=this.nextStop());return e},t.prototype.scrollUp=function(t){var s,e,i,r,h,o;for(i=t[0]||1;i--;)this.screen.splice(this.scrollTop,1),this.screen.splice(this.scrollBottom,0,this.blankLine());for(o=[],s=e=r=this.scrollTop,h=this.scrollBottom;h>=r?h>=e:e>=h;s=h>=r?++e:--e)o.push(this.screen[s+this.shift].dirty=!0);return o},t.prototype.scrollDown=function(t){var s,e,i,r,h,o;for(i=t[0]||1;i--;)this.screen.splice(this.scrollBottom,1),this.screen.splice(this.scrollTop,0,this.blankLine());for(o=[],s=e=r=this.scrollTop,h=this.scrollBottom;h>=r?h>=e:e>=h;s=h>=r?++e:--e)o.push(this.screen[s+this.shift].dirty=!0);return o},t.prototype.initMouseTracking=function(t){},t.prototype.resetTitleModes=function(t){},t.prototype.cursorBackwardTab=function(t){var s,e;for(s=t[0]||1,e=[];s--;)e.push(this.x=this.prevStop());return e},t.prototype.repeatPrecedingCharacter=function(t){var s,e,i;for(i=t[0]||1,e=this.screen[this.y+this.shift].chars,s=e[this.x-1]||this.defAttr;i--;)e[this.x++]=s;return this.screen[this.y+this.shift].dirty=!0},t.prototype.tabClear=function(t){var s;return s=t[0],0>=s?delete this.tabs[this.x]:3===s?this.tabs={}:void 0},t.prototype.mediaCopy=function(t){},t.prototype.setResources=function(t){},t.prototype.disableModifiers=function(t){},t.prototype.setPointerMode=function(t){},t.prototype.softReset=function(t){return this.cursorHidden=!1,this.insertMode=!1,this.originMode=!1,this.autowrap=!0,this.applicationKeypad=!1,this.applicationCursor=!1,this.scrollTop=0,this.scrollBottom=this.rows-1,this.curAttr=this.defAttr,this.x=this.y=0,this.charset=null,this.glevel=0,this.charsets=[null]},t.prototype.requestAnsiMode=function(t){},t.prototype.requestPrivateMode=function(t){},t.prototype.setConformanceLevel=function(t){},t.prototype.loadLEDs=function(t){},t.prototype.setCursorStyle=function(t){},t.prototype.setCharProtectionAttr=function(t){},t.prototype.restorePrivateValues=function(t){},t.prototype.setAttrInRectangle=function(t){var s,e,i,r,h,o,n,a;for(a=t[0],r=t[1],e=t[2],o=t[3],s=t[4],n=[];e+1>a;){for(h=this.screen[a+this.shift].chars,this.screen[a+this.shift].dirty=!0,i=r;o>i;)h[i]=this.cloneAttr(s,h[i].ch),i++;n.push(a++)}return n},t.prototype.savePrivateValues=function(t){},t.prototype.manipulateWindow=function(t){},t.prototype.reverseAttrInRectangle=function(t){},t.prototype.setTitleModeFeature=function(t){},t.prototype.setWarningBellVolume=function(t){},t.prototype.setMarginBellVolume=function(t){},t.prototype.copyRectangle=function(t){},t.prototype.enableFilterRectangle=function(t){},t.prototype.requestParameters=function(t){},t.prototype.selectChangeExtent=function(t){},t.prototype.fillRectangle=function(t){var s,e,i,r,h,o,n,a;for(e=t[0],a=t[1],r=t[2],s=t[3],o=t[4],n=[];s+1>a;){for(h=this.screen[a+this.shift].chars,this.screen[a+this.shift].dirty=!0,i=r;o>i;)h[i]=this.cloneAttr(h[i][0],String.fromCharCode(e)),i++;n.push(a++)}return n},t.prototype.enableLocatorReporting=function(t){var s;return s=t[0]>0},t.prototype.eraseRectangle=function(t){var s,e,i,r,h,o,n;for(n=t[0],i=t[1],s=t[2],h=t[3],o=[];s+1>n;){for(r=this.screen[n+this.shift].chars,this.screen[n+this.shift].dirty=!0,e=i;h>e;)r[e]=this.eraseAttr(),e++;o.push(n++)}return o},t.prototype.setLocatorEvents=function(t){},t.prototype.selectiveEraseRectangle=function(t){},t.prototype.requestLocatorPosition=function(t){},t.prototype.insertColumns=function(){var t,s,e,i;for(e=params[0],s=this.rows+this.shift,i=[];e--;)t=this.shift,i.push(function(){var e;for(e=[];s>t;)this.screen[t].chars.splice(this.x+1,0,this.eraseAttr()),this.screen[t].chars.pop(),this.screen[t].dirty=!0,e.push(t++);return e}.call(this));return i},t.prototype.deleteColumns=function(){var t,s,e,i;for(e=params[0],s=this.rows+this.shift,i=[];e--;)t=this.shift,i.push(function(){var e;for(e=[];s>t;)this.screen[t].chars.splice(this.x,1),this.screen[t].chars.push(this.eraseAttr()),this.screen[t].dirty=!0,this.screen[t].wrap=!1,e.push(t++);return e}.call(this));return i},t.prototype.charsets={SCLD:{"`":"‚óÜ",a:"‚ñí",b:"  ",c:"\f",d:"\r",e:"\n",f:"¬∞",g:"¬±",h:"‚ê§",i:"",j:"‚îò",k:"‚îê",l:"‚îå",m:"‚îî",n:"‚îº",o:"‚é∫",p:"‚éª",q:"‚îÄ",r:"‚éº",s:"‚éΩ",t:"‚îú",u:"‚î§",v:"‚î¥",w:"‚î¨",x:"‚îÇ",y:"‚â§",z:"‚â•","{":"œÄ","|":"‚â†","}":"¬£","~":"¬∑"},UK:null,US:null,Dutch:null,Finnish:null,French:null,FrenchCanadian:null,German:null,Italian:null,NorwegianDanish:null,Spanish:null,Swedish:null,Swiss:null,ISOLatin:null},t}(),window.Terminal=e}).call(this);
//# sourceMappingURL=main.min.js.map